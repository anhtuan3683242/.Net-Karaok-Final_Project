@model IEnumerable<QuanLyKaraoke.Models.Booking>
@{
    ViewBag.Title = "Admin Home Page";

}

<h1 class="title">Manage Booking Orders</h1>
@*For filtering*@
<!--<section>
    <input type="text" id="myInput" placeholder="Search anything...">-->
    @*From*@
    <!--<input id="currdate" class="currdate">-->
    @*To*@
    <!--<input id="nextdate" class="nextdate">

</section>
<a href="/Home/Add_new_booking" class="btn btn-info">Add new</a>
<table class="table table-hover" >
    <thead>
        <tr>
            <th scope="col">Room ID</th>
            <th scope="col">Start Time</th>
            <th scope="col">Booking Status</th>
            <th scope="col">Name</th>
            <th scope="col">Phone</th>
            <th scope="col">.</th>
        </tr>
    </thead>
    <tbody id="myTable">
        //30 Oct 2016
        @foreach (var booking in Model)
        {
        <tr>
            <td scope="row">@booking.Room.RoomID.ToString()</td>
            <td>@booking.DateTime.ToString("dd MMM yyyy hh:mm")</td>
            @if (booking.P_Status == 1)
            {
                <td style="color:yellowgreen">Using</td>
            }
            @if (booking.P_Status == 2)
            {
                <td style="color:green">Finish</td>
            }

            @if (booking.P_Status == 3)
            {
                <td style="color:red">Cancel</td>
            }
            <td>@booking.Name_Cus</td>
            <td>@booking.Phone_Cus</td>
            <td>
                <a href="#" id="checkout" class="btn btn-outline-success checkout" data="@booking.PayID"> Check IN</a> |
                @Html.ActionLink("Edit", "EditInfo", new { id = booking.PayID }, new { @class = "btn btn-outline-warning" }) |
                <a href="/Home/Order" class="btn btn-outline-info btnOrder" data="@booking.PayID">Order</a> |
                <a href="#" class="btn btn-outline-danger btnDel" data="@booking.PayID">Cancel</a>
            </td>
        </tr>
        }
    </tbody>
</table>
<a href="/Home/Add_new_booking" class="btn btn-info">Add new</a>-->

<a href="/Home/Add_new_booking" class="btn btn-info">Add new</a>
<div class="form-group">
    <div class="input-group input-daterange">
        <input type="text" id="min" class="form-control" value="14 Nov 2020">
        <span class="input-group-addon">to</span>
        <input type="text" id="max" class="form-control" value="17 Nov 2020">
    </div>
</div>
<table class="table table-hover" id="table-mutasi" style="width:1100px;">
    <thead>
        <tr>
            <th>Date</th>
            <th>Room ID</th>
            <th>Status</th>
            <th>Name</th>
            <th>Phone</th>
            <th></th>

        </tr>
    </thead>
    <tbody>
        @foreach (var test in Model)
        {
        <tr>
            <td>@test.DateTime.ToString("dd MMM yyyy hh:mm")</td>
            <td scope="row">@test.Room.RoomID.ToString()</td>
            @if (test.P_Status == 1)
            {
                <td style="color:yellowgreen">Using</td>
            }
            @if (test.P_Status == 2)
            {
                <td style="color:green">Finish</td>
            }

            @if (test.P_Status == 3)
            {
                <td style="color:red">Cancel</td>
            }
            <td>@test.Name_Cus</td>
            <td>@test.Phone_Cus</td>
            <td>
                <a href="#" id="checkout" class="btn btn-outline-success checkout" data="@test.PayID"> Check IN</a> |
                @Html.ActionLink("Edit", "EditInfo", new { id = test.PayID }, new { @class = "btn btn-outline-warning" }) |
                <a href="/Home/Order" class="btn btn-outline-info btnOrder" data="@test.PayID">Order</a> |
                <a href="#" class="btn btn-outline-danger btnDel" data="@test.PayID">Cancel</a>
            </td>
        </tr>
        }
    </tbody>
</table>


<script type="text/javascript">

        //Script duoc chuyen het vao file ~Conten/extend.js
    $(document).ready(function () {
        $('.checkout').click(function (e) {
            //bỏ tác dụng bấm mặc định
            e.preventDefault();
            var atag = $(this);
            var idBooking = $(this).attr('data');//lấy giá trị thuộc tính data(mã máy)
            if (!confirm("Do you want to check in ?"))
                return;
            $.ajax(
                {
                    url: '/Home/CheckIn/' + idBooking + '/',
                    method: "post",
                    success: function (data) {
                        if (data.isvalid) {
                            alert(data.msg)
                            return;
                        }
                        alert(data.msg);
                    },
                    failed: function () {

                    }
                }
            );
        });
    });

</script>




